###单例模式

+ 什么是单例？
    - 单例类在整个程序中只能有一个实例，这个类负责创建自己的对象，并确保只有一个对象被创建。

+ 代码实现要点
    - 私有构造器；
    - 持有该类属性；
    - 对外提供获取实例的静态方法。
--- 
```
* 饿汉式：线程安全、反射不安全、反序列化不安全
       当创建很多资源时，类加载会造成内存浪费

* 登记式(静态内部类式)：线程安全、防止反射攻击、反序列化不安全，可以理解为增强版的饿汉式

* 枚举式：目前是实现单例的最佳方式，线程安全、支持序列化、反序列化安全、防止反射攻击 

懒汉式：线程不安全，延迟加载(两种同步方式同步方法和同步代码块，效率低)加上synchornizd

* 双检锁：线程安全、volatile(避免指令重排)

ThreadLocal：不加锁，以空间换时间，为每个线程提供变量的独立副本，可以保证各自线程中是单例的，但是不同线程之间不能保证

CAS：比较交换技术，无锁乐观策略，线程安全

### 指令重排
instance = new Instance()会执行以下操作：
    (1)分配对象内存空间
    (2)初始化对象
    (3)instance指向(1)中的内存空间
    在某些编译器上，可能会出现指令重排
    (1)分配对象内存空间
    (2)instance指向(1)中的内存空间(此时并没有初始化对象，导致获取的对象为空对象)
    (3)初始化对象
###

